resources:
  jobs:
    wf_sales_dbt_dev:
      name: wf_sales_dbt_${{ github.ref_name }}
      tasks:
        - task_key: job_sales_dbt
          dbt_task:
            project_directory: ""
            commands:
              - dbt deps
              - dbt run
            warehouse_id: 60d2f96239fe8610
            catalog: sales_${{ github.ref_name }}
            source: GIT
          environment_key: dbt-default
      git_source:
        git_url: https://github.com/valentinlog/dbt_demo_databricks.git
        git_provider: gitHub
        git_branch: ${{ github.ref_name }}
      queue:
        enabled: true
      environments:
        - environment_key: Default
          spec:
            environment_version: "4"
        - environment_key: dbt-default
          spec:
            dependencies:
              - dbt-databricks>=1.0.0,<2.0.0
            environment_version: "4"
      performance_target: PERFORMANCE_OPTIMIZED
